define("analytics", ["jquery"], function($) {
	return {
		trackEventLink: function(url, category, action, label) {
			//console.log("analytics.trackEventLink init");
			ga('send', 'event', category, action, label, {
				'hitCallback': function () {
					document.location = url;
				}
			})
		},
		trackEvent: function(category, action, label) {
			//console.log("analytics.trackEvent init");
			ga('send', 'event', category, action, label);
		},
		init: function () {
			//console.log("analytics init");

			var self = this;

			if(window.ga && ga.create) {
				//console.log("analytics load");
				
				$('a.track-event').click(function(e) {

					var url			= $(this).attr('href');
					var category	= $(this).data('category');
					var action		= $(this).data('action');
					var label		= $(this).data('label');

					self.trackEventLink(url, category, action, label);

					e.preventDefault();
					return false;

				});

				$('img.track-event').click(function(e) {

					var category	= $(this).data('category');
					var action		= $(this).data('action');
					var label		= $(this).data('label');

					self.trackEvent(category, action, label);

				});

				$('div.track-event').click(function(e) {

					var category	= $(this).data('category');
					var action		= $(this).data('action');
					var label		= $(this).data('label');

					self.trackEvent(category, action, label);

				});

				$('span.track-event').click(function(e) {

					var category	= $(this).data('category');
					var action		= $(this).data('action');
					var label		= $(this).data('label');

					self.trackEvent(category, action, label);

				});
				
			} else {
				console.log("analytics load error");
			}
			
		}
	}

});